–•–æ—á—É —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á—É—é –∏ –Ω–∞–¥—ë–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –≤ Telegram WebApp-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ duoLove. –°–µ–π—á–∞—Å –æ–Ω–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

‚ùå –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞
–ò–≥—Ä–æ–∫ 1 –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫—É https://t.me/my_bot?start=invite_{user_id} ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

–ò–≥—Ä–æ–∫ 2 –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ, –±–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç inline-–∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å duoLove" ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

–ò–≥—Ä–æ–∫ 2 –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Üí WebApp –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è, –Ω–æ:

–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —ç–∫—Ä–∞–Ω "–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞", –≤–º–µ—Å—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–≤—è–∑–∏ ‚ùå

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞ "–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ" ‚ùå

–£ –∏–≥—Ä–æ–∫–∞ 1 –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç ‚Äî –ø–∞—Ä—Ç–Ω—ë—Ä –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è ‚ùå

‚úÖ –û–∂–∏–¥–∞–µ–º–∞—è –ª–æ–≥–∏–∫–∞ (–∫–∞–∫ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å)
üì≤ –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
–ò–≥—Ä–æ–∫ 1 –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫—É –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç:

arduino
Copy
Edit
https://t.me/my_bot?start=invite_123456
–ò–≥—Ä–æ–∫ 2 –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ:

–ë–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç inline-–∫–Ω–æ–ø–∫—É —Å web_app.url = https://yourdomain.com

–ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ WebApp —É –ò–≥—Ä–æ–∫–∞ 2:

–ß–µ—Ä–µ–∑ Telegram SDK –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω:

ts
Copy
Edit
const startParam = Telegram.WebApp.initDataUnsafe?.start_param;
// startParam === "invite_123456"
–ï—Å–ª–∏ startParam.startsWith("invite_"), –∏–∑–≤–ª–µ—á—å 123456 –∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫–∞–∫ –ø–∞—Ä—Ç–Ω—ë—Ä–∞

WebApp –ò–≥—Ä–æ–∫–∞ 2:

–°–æ–∑–¥–∞—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ (–µ—Å–ª–∏ –Ω–µ—Ç)

–î–æ–±–∞–≤–ª—è–µ—Ç partnerId = 123456

–û–±–Ω–æ–≤–ª—è–µ—Ç UI ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º

üîÑ –£ –ò–≥—Ä–æ–∫–∞ 1 (–ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–≥–æ)
–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ò–≥—Ä–æ–∫ 2 –ø—Ä–∏–Ω—è–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ:

–£ –ò–≥—Ä–æ–∫–∞ 1 –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–≤—è–∑—å —Å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º:

–ú–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ polling (usePartnerSync)

–õ–∏–±–æ —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞: –∫–æ–≥–¥–∞ –ø—Ä–∏–≥–ª–∞—à—ë–Ω–Ω—ã–π –ø—Ä–∏–Ω—è–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ, –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–∏–≥–Ω–∞–ª –ò–≥—Ä–æ–∫—É 1

üõ† –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å
1. üìå –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –æ—à–∏–±–∫—É "–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ"
–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ:

start_param —á–∏—Ç–∞–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–æ (–¥–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Telegram WebApp SDK)

–ò–ª–∏ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç invite_{id}

–ù—É–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å:

ts
Copy
Edit
useEffect(() => {
  const tg = window.Telegram?.WebApp;
  const startParam = tg?.initDataUnsafe?.start_param;

  if (startParam?.startsWith("invite_")) {
    const partnerId = startParam.replace("invite_", "");
    if (partnerId && !alreadyHasPartner) {
      database.setPartner(partnerId);
      refreshPartner(); // –æ–±–Ω–æ–≤–∏—Ç—å UI
    }
  }
}, []);
–¢–∞–∫–∂–µ —É–±—Ä–∞—Ç—å –ø–æ–∫–∞–∑ –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π ‚Äî –ø—Ä–æ—Å—Ç–æ –º–æ–ª—á–∞ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å.

2. üîÅ –°–¥–µ–ª–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É –ø–∞—Ä—Ç–Ω—ë—Ä–∞ —É –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—è
–ö–∞–∫ —Ç–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫ 2 –ø—Ä–∏–Ω—è–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ:

Telegram-–±–æ—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—Å–∏–≤—à–µ–º—É (–∏–≥—Ä–æ–∫—É 1) –∏

–ª–∏–±–æ –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å refreshPartner(), –ª–∏–±–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É WebApp (–µ—Å–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

3. üîí –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–∏–≤—è–∑—ã–≤–∞–Ω–∏—è
–ï—Å–ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä —É–∂–µ –µ—Å—Ç—å, –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç WebApp —Å–Ω–æ–≤–∞ –ø–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—é ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä

–ù–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Å–≤—è–∑—å

4. UX-–¥–µ—Ç–∞–ª–∏
–û—à–∏–±–∫—É "–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ" —É–±—Ä–∞—Ç—å

–ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å–≤—è–∑–∏: –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏–ª–∏ –ø—Ä–æ—Å—Ç–æ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é

