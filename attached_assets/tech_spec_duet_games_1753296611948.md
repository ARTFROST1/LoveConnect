# üß© –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ: Telegram WebApp "DuoLove"

## üìå –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

**–¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞** ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram, –≤ –∫–æ—Ç–æ—Ä–æ–º –¥–≤–∞ —á–µ–ª–æ–≤–µ–∫–∞ (–ø–∞—Ä—Ç–Ω—ë—Ä—ã) –º–æ–≥—É—Ç –¥–æ–±–∞–≤–∏—Ç—å—Å—è –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É –∏ –≤–º–µ—Å—Ç–µ –∏–≥—Ä–∞—Ç—å –≤ –º–∏–Ω–∏-–∏–≥—Ä—ã, –≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞–Ω–∏—è, –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∫–≤–µ—Å—Ç—ã –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å.

**–¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è** ‚Äî –ø–∞—Ä—ã (–ª—é–±–æ–≤–Ω—ã–µ, –¥—Ä—É–∂–µ—Å–∫–∏–µ, —Å–µ–º–µ–π–Ω—ã–µ), –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç —Å–±–ª–∏–∑–∏—Ç—å—Å—è –∏–ª–∏ –≤–µ—Å–µ–ª–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è –≤–º–µ—Å—Ç–µ –æ–Ω–ª–∞–π–Ω.

## ‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è            |
|-------------------------|------------------------|
| –§—Ä–æ–Ω—Ç–µ–Ω–¥                | React + TypeScript     |
| –ë–∞–Ω–¥–ª–µ—Ä                 | Vite                   |
| Telegram WebApp API     | telegram-web-app SDK   |
| –ë—ç–∫–µ–Ω–¥ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–∑–∂–µ)| Express (–Ω–æ —Å–µ–π—á–∞—Å ‚Äî –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–∞) |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö             | SQLite (—á–µ—Ä–µ–∑ sql.js –∏–ª–∏ better-sqlite3) |
| –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö         | IndexedDB / LocalStorage |
| –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º | –ß–µ—Ä–µ–∑ Telegram bot + —Å—Å—ã–ª–∫—É |

## üß± –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/duet-games-app
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Home.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddPartner.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GameList.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GameRoom.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ History.tsx
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ initDB.ts
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.ts
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram.ts
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx
‚îÇ   ‚îî‚îÄ‚îÄ main.tsx
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ vite.config.ts
```

## üß© –û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏ –ª–æ–≥–∏–∫–∞

### 1. üè† –ì–ª–∞–≤–Ω–∞—è (`/`)
- –ï—Å–ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω ‚Üí –ø–µ—Ä–µ–∞–¥—Ä–µ—Å–∞—Ü–∏—è –Ω–∞ `/add-partner`
- –ï—Å–ª–∏ –ø–∞—Ä—Ç–Ω—ë—Ä –µ—Å—Ç—å ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
  - –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä—Ç–Ω—ë—Ä–∞
  - –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å –∏–≥—Ä—É"
  - –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–∏—Å—Ç–æ—Ä–∏—è)

### 2. üë• –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Ç–Ω—ë—Ä–∞ (`/add-partner`)
- –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É –≤–∏–¥–∞ `https://t.me/yourbot?start=invite_{partner_id}`
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –ø–æ —Å—Å—ã–ª–∫–µ
- –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è ‚Üí –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ `/`

### 3. üéÆ –°–ø–∏—Å–æ–∫ –∏–≥—Ä (`/games`)
- –ò–≥—Ä—ã —Ä–∞–∑–±–∏—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º: —É–∑–Ω–∞–≤–∞–Ω–∏–µ, —Ä–µ–∞–∫—Ü–∏—è, –∫–≤–µ—Å—Ç—ã, –∑–∞–¥–∞–Ω–∏—è
- –ö–Ω–æ–ø–∫–∞ "–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –≤ –∏–≥—Ä—É"
- –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram —á–µ—Ä–µ–∑ –±–æ—Ç–∞

### 4. üß† –ò–≥—Ä–æ–≤–∞—è —Å–µ—Å—Å–∏—è (`/game/:id`)
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Å–µ—Å—Å–∏—è (—á–µ—Ä–µ–∑ Telegram Bot API –∏ local polling)
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –æ–±–æ–∏—Ö –∏–≥—Ä–æ–∫–æ–≤
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–≥—Ä—ã: –≤–æ–ø—Ä–æ—Å/–∑–∞–¥–∞–Ω–∏–µ ‚Üí –æ—Ç–≤–µ—Ç/—Ä–µ–∞–∫—Ü–∏—è ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### 5. üïò –ò—Å—Ç–æ—Ä–∏—è (`/history`)
- –ò—Å—Ç–æ—Ä–∏—è –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö –∏–≥—Ä (–ª–æ–∫–∞–ª—å–Ω–æ)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ "—Å–µ—Ä–¥–µ—á–µ–∫", –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π, —Ç—Ä–æ—Ñ–µ–µ–≤

## üß© –ü—Ä–∏–º–µ—Ä—ã –∏–≥—Ä

| –ù–∞–∑–≤–∞–Ω–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|----------|
| –ö—Ç–æ –∫–æ–≥–æ –ª—É—á—à–µ –∑–Ω–∞–µ—Ç | 5 –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –ø–∞—Ä—Ç–Ω—ë—Ä–µ, –æ–±–∞ –æ—Ç–≤–µ—á–∞—é—Ç –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç |
| –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ç–µ—Å—Ç –Ω–∞ —Ä–µ–∞–∫—Ü–∏—é | –ñ–º–∏ –∫–Ω–æ–ø–∫—É –±—ã—Å—Ç—Ä–µ–µ |
| –ü–∞—Ä–Ω—ã–π –∫–≤–µ—Å—Ç | –ü–æ—à–∞–≥–æ–≤—ã–π —Å—é–∂–µ—Ç —Å –≤—ã–±–æ—Ä–æ–º |
| –ó–∞–¥–∞–Ω–∏–µ-–¥–Ω—è | –í–µ—Å—ë–ª–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –∏–ª–∏ —á–µ–ª–ª–µ–Ω–¥–∂ |
| –ü—Ä–∞–≤–¥–∞ –∏–ª–∏ –¥–µ–π—Å—Ç–≤–∏–µ | –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–Ω–ª–∞–π–Ω-–≤–µ—Ä—Å–∏—è |

## üß¨ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)

### –¢–∞–±–ª–∏—Ü–∞ `user`
```sql
CREATE TABLE user (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  telegram_id TEXT,
  name TEXT,
  avatar TEXT
);
```

### –¢–∞–±–ª–∏—Ü–∞ `partner`
```sql
CREATE TABLE partner (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  user_id INTEGER,
  partner_telegram_id TEXT,
  partner_name TEXT,
  partner_avatar TEXT
);
```

### –¢–∞–±–ª–∏—Ü–∞ `game_sessions`
```sql
CREATE TABLE game_sessions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  game_type TEXT,
  user_score INTEGER,
  partner_score INTEGER,
  started_at TEXT,
  finished_at TEXT
);
```

### –¢–∞–±–ª–∏—Ü–∞ `actions`
```sql
CREATE TABLE actions (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  session_id INTEGER,
  player TEXT,
  action TEXT,
  timestamp TEXT
);
```

## üì° –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å Telegram Bot

> –ë–æ—Ç –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è:
- –û—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –≤ –∏–≥—Ä—É
- –†–∞—Å—Å—ã–ª–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π/—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –ü–µ—Ä–µ–¥–∞—á–∏ Telegram ID –ø–∞—Ä—Ç–Ω—ë—Ä–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ (`start=invite_12345`)

## ‚ö†Ô∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ
- –°–µ—Å—Å–∏–∏ –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–∞–º–∏ ‚Äî —á–µ—Ä–µ–∑ Telegram ID + local state
- –û–Ω–ª–∞–π–Ω —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ‚Äî —á–µ—Ä–µ–∑ –±–æ—Ç –∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ-–ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
- –ë–µ–∑ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, –¥–∞–Ω–Ω—ã–µ "—Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ", –Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è

## üèÜ –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ –±—É–¥—É—â–µ–º

- –î–æ–±–∞–≤–∏—Ç—å Firebase/WebRTC –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–µ–π –æ–Ω–ª–∞–π–Ω-—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –°–¥–µ–ª–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ SQLite (—á–µ—Ä–µ–∑ SQLCipher)
- –î–æ–±–∞–≤–∏—Ç—å "–º–∞–≥–∞–∑–∏–Ω —ç–º–æ—Ü–∏–π": –Ω–æ–≤—ã–µ —Ñ–æ–Ω—ã, –∞–≤–∞—Ç–∞—Ä–∫–∏ –∏ —Ç.–ø. –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è