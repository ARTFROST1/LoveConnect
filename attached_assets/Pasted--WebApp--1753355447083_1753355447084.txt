–°–æ–æ–±—â–µ–Ω–∏–µ "–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ" –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ WebApp –Ω–µ —Å–º–æ–≥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—á–∏—Ç–∞—Ç—å –∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å start_param –∏–∑ Telegram –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ. –≠—Ç–æ —á–∞—Å—Ç–∞—è –ø—Ä–æ–±–ª–µ–º–∞, –∏ –≤–æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, —á—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å, —á—Ç–æ–±—ã –≤—Å—ë –∑–∞—Ä–∞–±–æ—Ç–∞–ª–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:

‚úÖ –®–∞–≥ –∑–∞ —à–∞–≥–æ–º ‚Äî –∫–∞–∫ –ø–æ—á–∏–Ω–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
1. üì• –£–±–µ–¥–∏—Å—å, —á—Ç–æ WebApp –ø–æ–ª—É—á–∞–µ—Ç start_param
Telegram –ø–µ—Ä–µ–¥–∞—ë—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä invite_123456 –≤ Telegram.WebApp.initDataUnsafe.start_param. –ü—Ä–æ–≤–µ—Ä—å:

ts
Copy
Edit
useEffect(() => {
  const tg = window.Telegram?.WebApp;
  const param = tg?.initDataUnsafe?.start_param;

  console.log('–ü–æ–ª—É—á–µ–Ω start_param:', param); // <- –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "invite_123456"
}, []);
–ï—Å–ª–∏ param === undefined –∏–ª–∏ –ø—É—Å—Ç–æ–π:

–í–æ–∑–º–æ–∂–Ω–æ, —Ç—ã –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å WebApp –Ω–µ —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫—É, –∞ –Ω–∞–ø—Ä—è–º—É—é (–±–µ–∑ –ø–µ—Ä–µ—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ –±–æ—Ç–∞)

–£–±–µ–¥–∏—Å—å, —á—Ç–æ Telegram-–±–æ—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç inline-–∫–Ω–æ–ø–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ:

json
Copy
Edit
{
  "text": "–û—Ç–∫—Ä—ã—Ç—å duoLove",
  "web_app": {
    "url": "https://your-domain.com"
  }
}
–ê —Å–∞–º–∞ —Å—Å—ã–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:
https://t.me/your_bot?start=invite_123456

2. üîß –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π start_param —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
–î–æ–±–∞–≤—å —Ç–∞–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:

ts
Copy
Edit
useEffect(() => {
  const tg = window.Telegram?.WebApp;
  const param = tg?.initDataUnsafe?.start_param;

  if (param && param.startsWith("invite_")) {
    const inviterId = param.replace("invite_", "");

    // –¢–æ–ª—å–∫–æ –µ—Å–ª–∏ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—â—ë –Ω–µ—Ç –ø–∞—Ä—Ç–Ω—ë—Ä–∞
    database.getPartner().then(existingPartner => {
      if (!existingPartner) {
        database.setPartner(inviterId);
        refreshPartner();
      }
    });
  }
}, []);
‚ùó –û—à–∏–±–∫–∞ ¬´–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ¬ª –ø–æ—è–≤–ª—è–µ—Ç—Å—è, –µ—Å–ª–∏:

–ü–∞—Ä–∞–º–µ—Ç—Ä –ø—É—Å—Ç–æ–π –∏–ª–∏ –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "invite_"

–£–∂–µ –µ—Å—Ç—å –ø–∞—Ä—Ç–Ω—ë—Ä, –∏ –∫–æ–¥ –Ω–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫ —Å —ç—Ç–∏–º –±—ã—Ç—å

–ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ (undefined, null, await –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç) –∏ —Ç—ã –ª–æ–≤–∏—à—å —ç—Ç–æ –≤ catch

3. üö´ –ù–µ –ø–æ–∫–∞–∑—ã–≤–∞–π —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã
–í–º–µ—Å—Ç–æ –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è ¬´–ù–µ —É–¥–∞–ª–æ—Å—å –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ¬ª, –ø—Ä–æ—Å—Ç–æ:

–ù–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–π, –µ—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω

–ò–ª–∏ –ø–æ–∫–∞–∂–∏ –º—è–≥–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:

"–ü–æ—Ö–æ–∂–µ, –≤—ã —É–∂–µ —Å–≤—è–∑–∞–Ω—ã —Å –ø–∞—Ä—Ç–Ω—ë—Ä–æ–º. –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è."

üîÅ –ò –Ω–∞–∫–æ–Ω–µ—Ü ‚Äî —É –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ–ª—è (–∏–≥—Ä–æ–∫–∞ 1)
–ï—Å–ª–∏ —É –Ω–µ–≥–æ –æ—Ç–∫—Ä—ã—Ç WebApp, –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã usePartnerSync() –∏–ª–∏ refreshPartner() —Å—Ä–∞–±–æ—Ç–∞–ª –∏ –ø–æ–¥—Ç—è–Ω—É–ª –Ω–æ–≤–æ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä–∞

–ò–ª–∏ Telegram-–±–æ—Ç –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ:

"–ü–∞—Ä—Ç–Ω—ë—Ä [–ò–º—è] –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è! –ì–æ—Ç–æ–≤—ã –∏–≥—Ä–∞—Ç—å?"